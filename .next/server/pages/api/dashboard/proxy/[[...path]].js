"use strict";(()=>{var e={};e.id=854,e.ids=[854],e.modules={5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1428:e=>{e.exports=import("axios")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},8145:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>c,default:()=>d,routeModule:()=>l});var o=a(9947),s=a(2706),n=a(6762),i=a(1159),u=e([i]);i=(u.then?(await u)():u)[0];let d=(0,n.M)(i,"default"),c=(0,n.M)(i,"config"),l=new o.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/dashboard/proxy/[[...path]]",pathname:"/api/dashboard/proxy/[[...path]]",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},2715:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{x:()=>i});var o=a(4473),s=a(1428),n=e([s]);let u=(s=(n.then?(await n)():n)[0]).default.create({baseURL:o.C,withCredentials:!0,validateStatus:e=>200===e||401===e||304===e,timeout:3e4,headers:{"Content-Type":"application/json"},timeoutErrorMessage:"Request failed because the connection timed out. Check you internet connection."}),d=3;async function i({endpoint:e,method:t,securityHeaders:a,data:r}){let o=Object.keys(a).reduce((e,t)=>"token"!==t?e+`${t}=${a[t]};`:e,"");try{let s=await u({url:e,method:t,data:"POST"===t?r:void 0,headers:{cookie:o,Authorization:`Bearer ${a.token}`}});if(200===s.status)return[s.data,null];let n="",i="";for(;d>0;){let e=await u({url:"/refresh-token",method:"GET",headers:{cookie:`securedRefreshtokenCookie=${a.securedRefreshtokenCookie};`}});if(200===e.status){n=e.data.token,i=e.headers["set-cookie"].reduce((e,t)=>e+";"+t);break}if(d--,0===d)return"failed to refresh access token"}let c=await u({url:e,method:t,data:r,headers:{cookie:i,Authorization:`Bearer ${n}`}});if(200===c.status)return[c.data,i+`token=${n};Same-Site=Strict;Secure;HttpOnly;Path=/`];throw c}catch(e){throw e}}r()}catch(e){r(e)}})},1159:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>i});var o=a(2715),s=a(1428),n=e([o,s]);[o,s]=n.then?(await n)():n;let i=async(e,t)=>{let{path:a}=e.query,r="/"+a.join("/");try{let a=await (0,o.x)({endpoint:r,method:e.method,data:"POST"===e.method?e.body:void 0,securityHeaders:e.cookies});if("string"!=typeof a){let[e,r]=a;r&&t.setHeader("Set-Cookie",r),t.status(200).json(e);return}t.statusMessage=a,t.status(400).send(a)}catch(e){if(e instanceof s.AxiosError){console.log(e.response),t.status(e.status).json({Status:"FAIL",Message:e.message});return}t.status(500).json({Status:"FAIL",Message:"critical failure on server"})}};r()}catch(e){r(e)}})},4473:(e,t,a)=>{a.d(t,{C:()=>r});let r="https://kycapi.dev.secondstax.com"},2706:(e,t)=>{var a;Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(a||(a={}))},9947:(e,t,a)=>{e.exports=a(5600)}};var t=require("../../../../webpack-api-runtime.js");t.C(e);var a=t(t.s=8145);module.exports=a})();