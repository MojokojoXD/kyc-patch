"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[659],{3228:(e,t,a)=>{a.d(t,{A:()=>r});let r={src:"/_next/static/media/secondStax.6d6d3c99.webp",height:384,width:1307,blurDataURL:"data:image/webp;base64,UklGRoAAAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAANkooBAAJFRQ8SxwlIScjJQBWUDggSAAAAHACAJ0BKggAAgACQDglqAJ0ugDJAMkABI/XbQAA/voOlBqVYUHtn3sb0a54C2LjlEv5F/dWwr6TQDEX5cPypzd8g4SM/a5AAA==",blurWidth:8,blurHeight:2}},7659:(e,t,a)=>{a.d(t,{sf:()=>b,Mo:()=>m,Hb:()=>y,EN:()=>j,v7:()=>v,md:()=>g,ay:()=>w,zE:()=>f});var r=a(4848),l=a(9965),s=a.n(l),n=a(3228),i=a(6094),o=a(6540),u=a(8043),c=a(6977),d=a(1556);function p(e){let{maxSteps:t,currentStep:a,disable:l}=e,s=a/t*100;return(0,r.jsx)("div",{className:"flex flex-col justify-center items-center p-6 text-neutral-700",children:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:(0,i.cn)("w-full paragraph1Medium mb-1",l&&"text-neutral-700/20"),children:"PROGRESS"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(d.k,{max:t,value:s,className:(0,i.cn)("w-full border border-neutral-100 bg-transparent grow",l&&"border-neutral-700/20")}),(0,r.jsx)("span",{className:(0,i.cn)("paragraph1Regular",l&&"text-neutral-700/20"),children:l?0:"".concat(a,"/").concat(t)})]})]})})}var h=a(7321);function x(){let{formNav:e,goToFormLocation:t}=(0,h.kC)(),a=(0,o.useRef)(new Set),l=(0,o.useRef)(new Set);l.current.add(e.currentStage),a.current.add(e.currentStep);let s=e.allStages.reduce((e,t)=>e+t.steps.length,0);return(0,o.useEffect)(()=>{let t=document.getElementById(e.currentStep);null==t||t.scrollIntoView()},[e.currentStep]),(0,r.jsx)("div",{className:"bg-white h-full w-full max-w-xs overflow-hidden px-5 border-r border-neutral-100 shadow-sm",children:(0,r.jsxs)("div",{className:"h-full",children:[(0,r.jsx)("div",{className:"h-20",children:(0,r.jsx)(p,{maxSteps:s,currentStep:a.current.size})}),(0,r.jsx)("ol",{className:"font-normal text-neutral-700/95 list-inside overflow-auto max-h-[40rem] py-8 list-decimal",style:{scrollbarWidth:"thin"},children:(0,r.jsx)(u.nD,{type:"single",collapsible:!0,value:e.currentStage,onValueChange:e=>t(e),children:e.allStages.map(s=>(0,r.jsxs)(u.As,{value:s.name,className:(0,i.cn)("w-full outline-none focus-visible:outline-none focus-visible-ring-none hover:no-underline border-none bg-transparent py-0 h-fit border-none"),children:[(0,r.jsx)(u.$m,{onClick:()=>{s.name!==e.currentStage&&t(s.name)},disabled:!l.current.has(s.name),className:"border-none data-[state=closed]:rounded-none data-[state=open]:rounded-none bg-transparent px-5 leading-relaxed text-base font-medium text-neutral-700 capitalize",children:(0,r.jsx)("li",{children:s.name})}),(0,r.jsx)(u.ub,{className:"relative py-0 border-none",children:(0,r.jsxs)("ul",{className:"list-inside h-fit space-y-2 max-h-36 overflow-auto",style:{scrollbarWidth:"thin"},children:[(0,r.jsx)("div",{className:"absolute h-full border-l border-neutral-200"}),s.steps.map(l=>(0,r.jsx)(c.$,{id:l,variant:"link",disabled:!a.current.has(l),onClick:()=>t(s.name,l),size:"sm",className:(0,i.cn)("relative text-sm capitalize h-fit py-0 font-normal text-neutral-700 block hover:no-underline hover:text-neutral-700/75 transition-text ease-in-out duration-100 rounded-none py-1 border-s border-neutral-200 hover:border-neutral-300 w-full text-left transition-all z-10 pl-5 text-nowrap text-ellipsis",e.currentStep===l&&"border-l border-primary-400 hover:border-primary-400 text-primary-500 hover:text-primary-500 font-medium"),children:(0,r.jsx)("li",{children:l.split("_").at(0)})},l))]})})]},s.name))})})]})})}function m(e){let{children:t,...a}=e,l=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[a.content]),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"rounded-t-xl bg-neutral-100 flex justify-center items-center overflow-hidden",ref:l,children:(0,r.jsx)("div",{className:"h-[98px] w-[149px] relative",children:(0,r.jsx)(s(),{src:n.A,fill:!0,className:"object-contain",sizes:"(max-width: 768px) 200px",alt:"SSX Logo"})})}),(0,r.jsx)("div",{className:"flex flex-col pt-[40px] px-[40px] pb-[20px] justify-center border-x border-neutral-100 bg-white",children:(0,r.jsx)("div",{className:"space-y-[8px]",children:t})})]})}function f(e){let{children:t}=e;return(0,r.jsx)("h1",{className:"heading5Bold",children:t})}function g(e){let{children:t}=e;return(0,r.jsx)("p",{className:"max-w-prose text-neutral-500 paragraph2Regular",children:t})}function b(e){let{children:t,className:a,...l}=e;return(0,r.jsx)("div",{className:(0,i.cn)("px-[40px] pb-[40px] pt-[20px] space-y-8 grow border-x border-neutral-100 bg-white text-neutral-700",a),...l,children:t})}function v(){let{next:e,prev:t,formNav:a}=(0,h.kC)();return"submit"===a.currentStep?null:(0,r.jsxs)("div",{className:"flex items-center justify-end px-10 space-x-2 pb-16 pt-5 bg-white rounded-b-xl border-x border-b border-neutral-100",children:["introduction"!==a.currentStage&&(0,r.jsx)(c.$,{type:"button",variant:"outline",size:"lg",onClick:t,children:"Go Back"}),(0,r.jsx)(c.$,{type:"button",size:"lg",onClick:e,children:"instructions"===a.currentStep?"Begin Process":"Save & Continue"})]})}function w(e){let{children:t,className:a}=e;return(0,r.jsx)("div",{className:"py-5 border border-neutral-100 rounded bg-neutral-50",children:(0,r.jsx)("div",{className:(0,i.cn)("max-h-96 overflow-auto space-y-[16px]  max-w-prose text-neutral-700 paragraph2Regular py-[16px] px-8 [&_h2]:paragraph2Medium [&_h2]:text-neutral-800 [&_h3]:paragraph2Medium [&_ul_ol]:space-y-[16px] [&_li]:space-y-[16px] [&>ul_ol]:list-decimal [&>ul_ol]:ml-7 [&>ul_ul]:ml-7 [&_ol_ol_ol_ol]:list-[lower-alpha] [&>ul]:space-y-[16px] [&_ul_ul]:list-disc",a),children:t})})}function y(e){let{children:t}=e,a=t.length;return(0,r.jsx)("div",{className:"fixed inset-0 bg-neutral-50 overflow-auto",children:(0,r.jsx)("div",{className:(0,i.cn)("flex h-full w-full",a>1&&"flex-cols"),children:t})})}function j(){return(0,r.jsx)(x,{})}},9529:(e,t,a)=>{a.d(t,{W:()=>l});var r=a(6540);function l(e){let[t,a]=(0,r.useState)(),[l,s]=(0,r.useState)(!1),[n,i]=(0,r.useState)({flag:!1,message:""});return(0,r.useEffect)(()=>{let t=!1;return(async()=>{s(!0);try{let r=await e();t||(a(r),s(!1))}catch(e){"string"==typeof e&&i({flag:!0,message:e}),e instanceof Error&&i({flag:!0,message:e.message}),console.log(e)}})(),()=>{t=!0}},[e]),[t,l,n]}},7321:(e,t,a)=>{a.d(t,{jl:()=>d,N5:()=>m,kC:()=>p});var r=a(6540);class l{push(e){this.stack.push(e)}pop(){if(0!==this.stack.length)return this.stack.pop()}peek(){if(0!==this.stack.length)return this.stack[this.stack.length-1]}size(){return this.stack.length}clear(){this.stack=[]}constructor(){this.stack=[]}}let s=new l,n=(e,t)=>{let{currentStage:a,currentStep:r,allStages:l}=e,n=l.findIndex(e=>e.name===a),i=l[n].steps,o=i.findIndex(e=>e===r);switch(t.type){case"next":{if(n===l.length-1&&o===i.length-1)return e;s.push({stage:a,step:r,shouldValidate:!1});let t=o===i.length-1?n+1:n,u=o===i.length-1?0:o+1;return{...e,currentStage:l[t].name,currentStep:l[t].steps[u]}}case"prev":{if(0===s.size())return e;let t=s.pop();return{...e,currentStage:t.stage,currentStep:t.step,shouldValidate:!1}}case"remove_step":{let r=[...l],s=r.findIndex(e=>e.name===t.stage);if(-1===s)throw Error("Stage "+a+" is not supported");let n=r[s].steps.filter(e=>e!==t.step);return r[s]={...r[s],steps:[...n]},{...e,allStages:r}}case"reset":return{...e,allStages:t.stages};case"jump_to_form_location":{var u,c,d;let n=null!==(c=t.toStage)&&void 0!==c?c:a,i=l.find(e=>e.name===n),o=null!==(d=t.toStep)&&void 0!==d?d:null==i?void 0:i.steps.at(0);if(!l.some(e=>e.name===n)||!o)return e;return s.push({stage:a,step:r,shouldValidate:!1}),{...e,currentStage:n,currentStep:o,shouldValidate:null===(u=t.payload)||void 0===u?void 0:u.shouldValidate}}default:throw Error("action type is not supported")}};var i=a(9785),o=a(6715),u=a(9529),c=a(5658);let d=(0,r.createContext)(null);function p(){let e=(0,r.useContext)(d);if(!e)throw Error("useKYCForm must be used within a KYC context");return e}let h=null,x=async()=>{null==h||h.call(void 0),h=null};function m(e,t){let[a,l]=(0,r.useState)(!0),[s,d]=(0,r.useState)(""),p=(0,i.mN)({mode:"onChange",...void 0!==t&&{defaultValues:t}}),[m,f]=(0,r.useReducer)(n,{currentStage:e[0].name,currentStep:e[0].steps[0],allStages:e}),[g,b,v]=(0,u.W)(c.j),w=(0,o.useRouter)(),y=w.query,j=(0,r.useCallback)(e=>l(e),[]),N=(0,r.useCallback)(e=>d(e),[]),A=e=>{h=e},S=(0,r.useCallback)(async()=>{await x(),await p.trigger(void 0,{shouldFocus:!0})&&f({type:"next"})},[p]),k=(0,r.useCallback)(async()=>{if(await x(),m.shouldValidate&&!await p.trigger(void 0,{shouldFocus:!0})){alert("To continue, please make sure all entries are valid!");return}f({type:"prev"})},[p,m.shouldValidate]),_=(0,r.useCallback)(async(e,t)=>{if(await x(),m.shouldValidate&&!await p.trigger(void 0,{shouldFocus:!0})){alert("To continue, please make sure all entries are valid!");return}f({type:"jump_to_form_location",toStage:e,toStep:t,payload:{shouldValidate:!0}})},[m,p]);return(0,r.useEffect)(()=>{w.isReady&&(y.c_id&&y.b_code&&y.submission||d("missing or malformed client ID or broker code"),l(!1))},[w,y]),(0,r.useMemo)(()=>{var e,t,r;return{formNav:m,formVars:{clientID:null!==(e=y.c_id)&&void 0!==e?e:"",brokerCode:null!==(t=y.b_code)&&void 0!==t?t:"",submissionID:null!==(r=y.submission)&&void 0!==r?r:"",countryList:null!=g?g:[[],[]]},formAction:f,form:p,toggleLoading:j,setError:N,isLoading:a||b,error:s||v.message,next:S,prev:k,onFormNav:A,goToFormLocation:_,actionBeforeFormNav:h}},[m,S,k,f,p,y,N,j,_,s,v,a,b,g])}},8043:(e,t,a)=>{a.d(t,{$m:()=>c,As:()=>u,nD:()=>o,ub:()=>d});var r=a(4848),l=a(6540),s=a(2980),n=a(2027),i=a(6094);let o=s.bL,u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.q7,{ref:t,className:(0,i.cn)("",a),...l})});u.displayName="AccordionItem";let c=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,r.jsx)(s.Y9,{className:"flex",children:(0,r.jsxs)(s.l9,{ref:t,className:(0,i.cn)("flex flex-1 items-center justify-between p-[16px] paragraph3Regular transition-all [&[data-state=open]>svg]:rotate-180 border data-[state=open]:rounded-t-lg data-[state=closed]:rounded-lg border-neutral-200 text-neutral-700 bg-neutral-50",a),...o,children:[l,(0,r.jsx)(n.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});c.displayName=s.l9.displayName;let d=l.forwardRef((e,t)=>{let{className:a,children:l,...n}=e;return(0,r.jsx)(s.UC,{ref:t,className:(0,i.cn)("overflow-hidden text-sm transition-all ease-linear data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down data-[state=open]:border-b data-[state=open]:border-x border-neutral-200 p-[24px] rounded-b-lg border-t-none",a),...n,children:(0,r.jsx)("div",{className:(0,i.cn)("space-y-[40px]"),children:l})})});d.displayName=s.UC.displayName},1556:(e,t,a)=>{a.d(t,{k:()=>i});var r=a(4848),l=a(6540),s=a(6669),n=a(6094);let i=l.forwardRef((e,t)=>{let{className:a,value:l,indicatorStyle:i="",...o}=e;return(0,r.jsx)(s.bL,{ref:t,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full bg-neutral-100",a),...o,children:(0,r.jsx)(s.C1,{className:(0,n.cn)("h-full w-full flex-1 bg-success-500 transition-all",i),style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});i.displayName=s.bL.displayName},5658:(e,t,a)=>{a.d(t,{j:()=>s});var r=a(4335);let l=["GH","NG","KE"],s=async()=>{try{let e=await r.A.get("/api/get-country-list"),t=e.data.data.filter(e=>l.includes(e.cty_code)),a=e.data.data.filter(e=>!l.includes(e.cty_code));return[t,a]}catch(e){return console.log(e),[[],[]]}}}}]);